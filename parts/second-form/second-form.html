<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Second Form</title>
  </head>
  <body>
    <div class="lp-element lp-pom-form has-axis" id="lp-pom-form-51">
      <form
        action="/fsg?pageId=7650ff26-f8f1-4a85-8414-59c2ee95ed28&amp;variant=a"
        method="POST"
      >
        <input
          type="hidden"
          name="pageId"
          value="7650ff26-f8f1-4a85-8414-59c2ee95ed28"
        /><input type="hidden" name="pageVariant" value="a" />
        <div class="fields">
          <div class="lp-pom-form-field single-line-text" id="container_nome">
            <input
              id="nome"
              name="nome"
              type="text"
              class="ub-input-item single text form_elem_nome"
              placeholder="Qual seu nome?"
              required=""
            />
          </div>
          <div class="lp-pom-form-field email" id="container_email">
            <input
              id="email"
              name="email"
              type="email"
              class="ub-input-item single text form_elem_email"
              placeholder="E-mail"
              required=""
              pattern="^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9_\-]+[.]+[a-zA-Z0-9\-.]{2,61}$"
            />
          </div>
          <div
            class="lp-pom-form-field single-line-text"
            id="container_telefone"
          >
            <input
              id="telefone"
              name="telefone"
              type="text"
              class="ub-input-item single text form_elem_telefone"
              placeholder="Telefone com DDD"
              required=""
            />
          </div>
          <div class="lp-pom-form-field drop-down" id="container_faixa_etaria">
            <select
              id="faixa_etaria"
              name="faixa_etaria"
              class="ub-input-item single form_elem_faixa_etaria"
              required=""
            >
              <option value="">Qual sua faixa etária?</option>
              <option value="18 a 24 anos">18 a 24 anos</option>
              <option value="25 a 39 anos">25 a 39 anos</option>
              <option value="40 a 55 anos">40 a 55 anos</option>
              <option value="Acima de 55">Acima de 55</option>
            </select>
          </div>
          <div
            class="lp-pom-form-field drop-down"
            id="container_qual_seu_interesse"
          >
            <select
              id="qual_seu_interesse"
              name="qual_seu_interesse"
              class="ub-input-item single form_elem_qual_seu_interesse"
              required=""
            >
              <option value="">Qual seu interesse?</option>
              <option value="Tratar linhas de expressão ou rugas">
                Tratar linhas de expressão ou rugas
              </option>
              <option value="Tratar olheiras/craquelados nos olhos">
                Tratar olheiras/craquelados nos olhos
              </option>
              <option value="Reduzir a papada">Reduzir a papada</option>
              <option value="Tratar cicatrizes">Tratar cicatrizes</option>
              <option value="Tratar acne, melasma ou rosácea">
                Tratar acne, melasma ou rosácea
              </option>
              <option value="Tratar bigode chinês">Tratar bigode chinês</option>
              <option value="Apenas consulta de rotina">
                Apenas consulta de rotina
              </option>
            </select>
          </div>
        </div>
        <button
          class="lp-element lp-pom-button"
          id="lp-pom-button-52"
          type="submit"
        >
          <span class="label">QUERO MAIS INFORMAÇÔES</span>
        </button>
      </form>
    </div>

    <section id="form-section">
      <form method="POST" id="custom_form">
        <div class="fields">
          <div class="lp-pom-form-field single-line-text" id="container_nome">
            <input
              id="custom_nome"
              name="custom_nome"
              type="text"
              class="ub-input-item single text form_elem_nome"
              placeholder="Qual seu nome?"
              required=""
            />
          </div>
          <div class="lp-pom-form-field email" id="container_email">
            <input
              id="custom_email"
              name="custom_email"
              type="email"
              class="ub-input-item single text form_elem_email"
              placeholder="E-mail"
              required=""
              pattern="^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9_\-]+[.]+[a-zA-Z0-9\-.]{2,61}$"
            />
          </div>
          <div
            class="lp-pom-form-field single-line-text"
            id="container_telefone"
          >
            <input
              id="custom_telefone"
              name="custom_telefone"
              type="text"
              class="ub-input-item single text form_elem_telefone"
              placeholder="Telefone com DDD"
              required=""
            />
          </div>
          <div class="lp-pom-form-field drop-down" id="container_faixa_etaria">
            <select
              id="custom_faixa_etaria"
              name="custom_faixa_etaria"
              class="ub-input-item single form_elem_faixa_etaria"
              required=""
            >
              <option value="">Qual sua faixa etária?</option>
              <option value="18 a 24 anos">18 a 24 anos</option>
              <option value="25 a 39 anos">25 a 39 anos</option>
              <option value="40 a 55 anos">40 a 55 anos</option>
              <option value="Acima de 55">Acima de 55</option>
            </select>
          </div>
          <div
            class="lp-pom-form-field drop-down"
            id="container_qual_seu_interesse"
          >
            <select
              id="custom_qual_seu_interesse"
              name="custom_qual_seu_interesse"
              class="ub-input-item single form_elem_qual_seu_interesse"
              required=""
            >
              <option value="">Qual seu interesse?</option>
              <option value="Tratar linhas de expressão ou rugas">
                Tratar linhas de expressão ou rugas
              </option>
              <option value="Tratar olheiras/craquelados nos olhos">
                Tratar olheiras/craquelados nos olhos
              </option>
              <option value="Reduzir a papada">Reduzir a papada</option>
              <option value="Tratar cicatrizes">Tratar cicatrizes</option>
              <option value="Tratar acne, melasma ou rosácea">
                Tratar acne, melasma ou rosácea
              </option>
              <option value="Tratar bigode chinês">Tratar bigode chinês</option>
              <option value="Apenas consulta de rotina">
                Apenas consulta de rotina
              </option>
            </select>
          </div>
        </div>
        <button
          class="lp-element lp-pom-button"
          id="custom_lp-pom-button-52"
          type="button"
        >
          <span class="label">QUERO MAIS INFORMAÇÔES</span>
        </button>
      </form>
    </section>
    <style>
      #form-section {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .custom-form-btn {
        display: block;
        border-style: none;
        border-radius: calc(0px * var(--scale, 1));
        left: calc(20px * var(--scale, 1));
        top: calc(327px * var(--scale, 1));
        z-index: 38;
        width: calc(290px * var(--scale, 1));
        height: calc(42px * var(--scale, 1));
        position: absolute;
        background: rgba(255, 240, 195, 1);
        box-shadow: none;
        text-shadow: none;
        color: #2c2c2c;
        font-size: calc(16px * var(--scale, 1));
        line-height: calc(19px * var(--scale, 1));
        font-weight: 600;
        font-family: Montserrat;
        font-style: normal;
        text-align: center;
        background-repeat: no-repeat;
      }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const formatPhoneNumber = ((number) => {
          // Remove todos os caracteres que não são dígitos
          number = number.replace(/\D/g, "");
          number = "+55" + number;
          return number;
        })

        // Função para atualizar os valores do primeiro formulário
        const updateFirstForm = (() => {
          document.getElementById("nome").value =
            document.getElementById("custom_nome").value;
          document.getElementById("email").value =
            document.getElementById("custom_email").value;
          document.getElementById("telefone").value =
            document.getElementById("custom_telefone").value;
          document.getElementById("faixa_etaria").value =
            document.getElementById("custom_faixa_etaria").value;
          document.getElementById("qual_seu_interesse").value =
            document.getElementById("custom_qual_seu_interesse").value;
        })

        const updateSecondForm = (() => {
          document.getElementById("custom_nome").value =
            document.getElementById("nome").value;
          document.getElementById("custom_email").value =
            document.getElementById("email").value;
          document.getElementById("custom_telefone").value =
            document.getElementById("telefone").value;
          document.getElementById("custom_faixa_etaria").value =
            document.getElementById("faixa_etaria").value;
          document.getElementById("custom_qual_seu_interesse").value =
            document.getElementById("qual_seu_interesse").value;
        })

        // Selecionar o primeiro formulário e atribuir um ID
        const firstFormContainer = document.getElementById("lp-pom-form-51");
        const firstForm = firstFormContainer.querySelector("form");
        if (firstForm) {
          firstForm.id = "first_form";
        } else {
          console.error("First form not found");
          return;
        }

        // Função para validar e formatar números de telefone
        function validateAndFormatPhoneNumber(id) {
          try {
            const phoneField = document.getElementById(id);
            phoneField.value = formatPhoneNumber(phoneField.value);
          } catch (error) {
            alert(error.message);
            throw error; // Para evitar que o formulário seja enviado se houver erro
          }
        }

        document
          .getElementById("nome")
          .addEventListener("input", updateSecondForm);
        document
          .getElementById("email")
          .addEventListener("input", updateSecondForm);
        document
          .getElementById("telefone")
          .addEventListener("input", updateSecondForm);
        document
          .getElementById("faixa_etaria")
          .addEventListener("change", updateSecondForm);
        document
          .getElementById("qual_seu_interesse")
          .addEventListener("change", updateSecondForm);


        // Adicionar eventos de input e change para sincronizar campos em tempo real
        document
          .getElementById("custom_nome")
          .addEventListener("input", updateFirstForm);
        document
          .getElementById("custom_email")
          .addEventListener("input", updateFirstForm);
        document
          .getElementById("custom_telefone")
          .addEventListener("input", updateFirstForm);
        document
          .getElementById("custom_faixa_etaria")
          .addEventListener("change", updateFirstForm);
        document
          .getElementById("custom_qual_seu_interesse")
          .addEventListener("change", updateFirstForm);


        firstForm.addEventListener("submit", (e) => {
          e.preventDefault();
          validateAndFormatPhoneNumber("telefone")
          validateAndFormatPhoneNumber("custom_telefone")
          console.log(document.getElementById("custom_telefone").value)
          console.log(document.getElementById("telefone").value)
          firstForm.submit()
        })

        // Enviar o primeiro formulário ao clicar no botão do segundo formulário
        document
          .querySelector(".custom-submit-btn")
          .addEventListener("click", (event) => {
            event.preventDefault();
            try {
              updateFirstForm();
              document
                 .querySelector('#first_form button[type="submit"]')
                 .click();
            } catch (error) {
              console.error("Erro ao validar o número de telefone:", error);
            }
          });

        // Adicionar evento ao fechar o modal para redirecionar
        const observer = new MutationObserver(() => {
          const modalOpen = document.querySelector(
            ".backdrop__3tG5Hl.open__1oMisJ"
          );
          if (modalOpen) {
            const closeButton = modalOpen.querySelector(".close__2NcGKV");
            if (closeButton) {
              closeButton.addEventListener("click", () => {
                window.location.href =
                  "https://www.instagram.com/dermatoliadantas";
              });
            }

            // Adicionar evento ao clicar fora do modal para fechá-lo
            const backdrop = document.querySelector(".backdrop__3tG5Hl");
            backdrop.addEventListener("click", (event) => {
              if (event.target === backdrop) {
                window.location.href =
                  "https://www.instagram.com/dermatoliadantas";
              }
            });
          }
        });

        observer.observe(document.body, { childList: true, subtree: true });
      });
    </script>
  </body>
</html>
